<!DOCTYPE html>
<html lang="de-DE">
<head>
	<meta charset="utf-8">

	<title>BOS Gruppensuche NRW</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<meta name="description" content="BOS Gruppensuche NRW">
	<meta name="theme-color" content="#50e3c2">
	<link rel="manifest" href="./manifest/manifest.webmanifest">
	<link rel="apple-touch-icon" sizes="16x16" href="./icons/ios/16.png">
	<link rel="apple-touch-icon" sizes="20x20" href="./icons/ios/20.png">
	<link rel="apple-touch-icon" sizes="32x32" href="./icons/ios/32.png">
	<link rel="apple-touch-icon" sizes="40x40" href="./icons/ios/40.png">
	<link rel="apple-touch-icon" sizes="50x50" href="./icons/ios/50.png">
	<link rel="apple-touch-icon" sizes="64x64" href="./icons/ios/64.png">
	<link rel="apple-touch-icon" sizes="72x72" href="./icons/ios/72.png">
	<link rel="apple-touch-icon" sizes="100x100" href="./icons/ios/100.png">
	<link rel="apple-touch-icon" sizes="128x128" href="./icons/ios/128.png">
	<link rel="apple-touch-icon" sizes="256x256" href="./icons/ios/256.png">
	<link rel="apple-touch-icon" sizes="512x512" href="./icons/ios/512.png">
	<link rel="apple-touch-icon" sizes="1024x1024" href="./icons/ios/1024.png">
	<link rel="icon" type="image/png" sizes="256x256" href="./icons/windows11/Square44x44Logo.targetsize-256.png">
	<link rel="icon" type="image/png" sizes="96x96" href="./icons/windows11/Square44x44Logo.targetsize-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="./icons/windows11/Square44x44Logo.targetsize-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="./icons/windows11/Square44x44Logo.targetsize-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./icons/windows11/Square44x44Logo.targetsize-16.png">

	<script type="text/javascript">
// Register service worker to control making site work offline
if ('serviceWorker' in navigator) {
	navigator.serviceWorker
		.register('./sw.js?v=3.0.4')
		.then(event => console.log({msg: 'Service Worker Registered ', event}));
}
	</script>

	<script
			src="https://code.jquery.com/jquery-3.6.0.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"
			integrity="sha256-eTyxS0rkjpLEo16uXTS0uVCS4815lc40K2iVpWDvdSY="
			crossorigin="anonymous"></script>

	<script src="./gruppen.js?v=3.2" defer></script>
	<script src="./index.js" defer></script>
	<link href="./style.css" rel="stylesheet">

	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css" media="screen">

</head>
<body>
	<h1 style="margin: 10px 0;">
		<img
				style="width: 2rem;height: initial;vertical-align: bottom;margin-right: 5px;"
				alt="Logo - Ennepe-Ruhr-Kreis"
				src="./images/logo.svg" width="71" height="78">IuK Ennepe-Ruhr-Kreis
	</h1>
	<hr style="display: none"/>
	<h5>Suchfunktion Rufgruppen Fleetmapping NRW <span id="gruppen_version_span">V23</span></h5>
	<hr/>
	<div class="table" style="margin: 2rem 0">
		<label class="cell" for="gruppen">Gruppe:</label>
		<input class="cell" id="gruppen" autofocus tabindex="0" name="gruppen" size="1">
		<label class="cell" for="zusatztext" id="zusatztext_label" style="display:none">⚠ Hinweis:</label>
		<div class="cell input blink_border" id="zusatztext" readonly="readonly" style="display:none; text-align: center; border: 3px solid red"></div>
		<label class="cell" for="wert">Kurzwahl:</label>
		<input class="cell" id="wert" readonly="readonly" size="1">

		<label class="cell" for="pol_kw" id="pol_kw_label" style="display: none">POL KW:</label>
		<input class="cell" id="pol_kw" readonly="readonly" style="display: none">
	
		<label class="cell needs_selection nutzer" for="nutzer" style="display: none">Nutzer:</label>
		<fieldset id="nutzer" class="nutzer cell needs_selection" disabled="disabled" style="display: none">
			<label id="RTH">RTH</label>
			<label id="nPol">nPol</label>
			<label id="THW">THW</label>
			<label id="Pol">Pol</label>
			<label id="OA">OA</label>
		</fieldset>
		<label class="gebiet cell needs_selection" for="gebiet" style="display: none">Gebiet:</label>
		<fieldset id="gebiet" class="gebiet cell needs_selection" disabled="disabled" style="display: none">
			<label id="Kreisweit">Kreis</label>
			<label id="Landesweit">Land</label>
			<label id="Bundesweit">Bund</label>
		</fieldset>
		<button class="share-button" style="display: none; margin-right: 0">
			<svg style="width:24px; height:24px" viewBox="0 0 24 24" width="24px" height="24px">
				<g id="share-icon" fill="none"
					stroke="currentColor" stroke-width="2" stroke-linecap="round"
					stroke-linejoin="round" class="feather feather-share">
					<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
					<polyline points="16 6 12 2 8 6"></polyline>
					<line x1="12" y1="2" x2="12" y2="15"></line></g>
				</svg>
			Teilen
		</button>
	</div>
	<hr/>
	<br/>
	<div style="display: flex;" class="smaller">
		<div style="flex: 1 1 1px">
			<label for="motorola"><input type="radio" id="motorola" name="funke" value="motorola" checked>Motorola</label>
			<ul class="smaller">
				<li>Betriebsart auswählen (<cite>DMO</cite>/<cite>TMO</cite>)</li>
				<li>Kurzwahl eingeben, danach <cite>*</cite> drücken</li>
				<li><cite>Anlage</cite> auswählen</li>
			</ul>
		</div>
		<div style="flex: 1 1 1px">
			<label for="sepura"><input type="radio" id="sepura" name="funke" value="sepura">Sepura</label>
			<ul>
				<li>Modustaste drücken</li>
				<li>Nummer eingeben</li>
				<li>bestätigen</li>
			</ul>
		</div>
	</div>
	<hr/>
	<footer>
		<h6>Impressum</h6>
		<p>M. Schmidt</p>
		<p>Leitstelle Ennepe-Ruhr</p>
		<p><a href="mailto:m.schmidt@leitstelle-en.de?subject=Wg%3A%20Suchfunktion%20Rufgruppen%20NRW%20V23%20-%20v3.2.1">m.schmidt@leitstelle-en.de</a></p>
		<p class="version">v3.2.1</p>
	</footer>
	<button class="add-button" style="display: none">Zum Startbildschirm hinzufügen</button><br/>
</body>
<script>
/**
 * @type Gruppe
 */
let lastWert;
$(() => {
	$(".share-button").button()
	$(".add-button").button()
	const zusatzMapping = {
		"text_adhoc_bund" : "<div>Für Ad-hoc-Einsatzlagen;</div><div>Abstimmung mit TTB,</div><div>Freischaltung für alle BOS möglich</div>",
		"text_adhoc_land": "<div>Für Ad-hoc-Einsatzlagen;</div><div>Abstimmung mit TTB</div>",
		"text_plan_bund" : "<div>Für planbare Einsatzlagen;</div><div>Abstimmung mit TTB,</div><div>Freischaltung für alle BOS möglich</div>",
		"text_plan_land": "<div>Für planbare Einsatzlagen;</div><div>Abstimmung mit TTB</div>"
	}
	const gruppenInput = $('#gruppen')
	gruppenInput.autocomplete({
		source: gruppen,
		minLength: 0,
		autoFocus: true,
		select(e, ui) {
			/**
			 * @type Gruppe
			 */
			const item = ui.item;
			console.log({ui, e, item})
			$('#wert').val(item.value)
			const zusatzText = zusatzMapping[item.Zusatztext];
			$('#zusatztext_label').toggle(!!zusatzText)
			$('#zusatztext').empty().append($(zusatzText)).toggle(!!zusatzText)
			$('#pol_kw').val(item.PolKW).toggle(!!item.PolKW)
			$('#pol_kw_label').toggle(!!item.PolKW)
			gruppenInput.val(item.label)
			lastWert = item
			{
				$('#RTH').toggleClass('hidden', !item.RTH);
				$('#nPol').toggleClass('hidden', !item.nPol);
				$('#THW').toggleClass('hidden', !item.THW);
				$('#Pol').toggleClass('hidden', !item.Pol);
				$('#OA').toggleClass('hidden', !item.OA);
				$('.nutzer').toggle(!!item.RTH || !!item.nPol || !!item.THW || !!item.Pol || !!item.OA)
			}
			{
				$('#Kreisweit').toggleClass('hidden', !item.Kreisweit);
				$('#Landesweit').toggleClass('hidden', !item.Landesweit);
				$('#Bundesweit').toggleClass('hidden', !item.Bundesweit);
				$('.gebiet').toggle(!!item.Kreisweit || !!item.Landesweit || !!item.Bundesweit)
			}
			$('.share-button').show()
			console.log(item);
			return false;
		}
	});
	$('#gruppen_version_span').text(gruppen_version);
});
</script>
</html>
