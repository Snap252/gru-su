<!DOCTYPE html>
<html lang="de-DE">
<head>
	<meta charset="utf-8">

	<title>BOS Gruppensuche NRW</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="manifest" href="manifest/manifest.webmanifest">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="icon" type="image/x-icon" href="icons/favicon.ico">

	<script type="text/javascript">
// Register service worker to control making site work offline
if ('serviceWorker' in navigator) {
	navigator.serviceWorker
		.register('sw.js?v=2_02')
		.then(e => console.log({msg: 'Service Worker Registered ', event: e}));
}
	</script>

	<script
		src="https://code.jquery.com/jquery-3.6.0.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"
		integrity="sha256-eTyxS0rkjpLEo16uXTS0uVCS4815lc40K2iVpWDvdSY="
		crossorigin="anonymous"></script>
		<script src="index.js" defer></script>
		<link href="style.css" rel="stylesheet">
		<script src="gruppen.js"></script>
	
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
	
</head>
<body>
	<div>
		<img style="display:block; width: 320px; height: initial; margin-left: auto; margin-right: auto;" alt="Logo - Enepe-Ruhr-Kreis" src="images/logo.svg" width="240" height="320" />
		<h1 style="font-family: sans-serif">IuK<br/>Ennepe-Ruhr-Kreis</h1>
	</div>
	<hr/>
	<h5>Suchfunktion Rufgruppen Fleetmapping NRW <span id="gruppen_version_span">V22</span></h5>
	<div class="table">
		<label class="cell" for="gruppen">Gruppe:</label>
		<input class="cell" id="gruppen" autofocus tabindex="1" name="gruppen">
		<label class="cell" for="zusatztext" style="display:none">Zusatz:</label>
		<input class="cell" id="zusatztext" readonly="readonly" style="display:none; text-align: center; border-color: red">
		<label class="cell" for="wert">Kurzwahl:</label>
		<input class="cell" id="wert" readonly="readonly">

		<label class="cell" for="pol_kw" id="pol_kw_label"style="display: none">POL KW:</label>
		<input class="cell" id="pol_kw" readonly="readonly" style="display: none">
	
		<label class="cell needs_selection nutzer" for="nutzer" style="display: none">Nutzer:</label>
		<fieldset id="nutzer" class="nutzer cell needs_selection" disabled="disabled" style="display: none">
			<label id="RTH">RTH</label>
			<label id="nPol">nPol</label>
			<label id="THW">THW</label>
			<label id="Pol">Pol</label>
		</fieldset>
		<label class="gebiet cell needs_selection" for="gebiet" style="display: none">Gebiet:</label>
		<fieldset id="gebiet" class="gebiet cell needs_selection" disabled="disabled" style="display: none">
			<label id="Kreisweit">Kreis</label>
			<label id="Landesweit">Land</label>
			<label id="Bundesweit">Bund</label>
		</fieldset>
		<button class="share-button" style="display: none; margin-right: 0">
			<svg style="width:24px; height:24px">
				<g id="share-icon" viewBox="0 0 24 24" fill="none"
					stroke="currentColor" stroke-width="2" stroke-linecap="round"
					stroke-linejoin="round" class="feather feather-share">
					<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
					<polyline points="16 6 12 2 8 6"></polyline>
					<line x1="12" y1="2" x2="12" y2="15"></line></g>
				</svg>
			Teilen
		</button>
		<br/>
	</div>
	<hr/>
	<br/>
	<div style="display: flex;" class="smaller">
		<div style="flex-grow: 1">
			<label for="motorola"><input type="radio" id="motorola" name="funke" value="motorola" checked>Motorola</label>
			<ul class="smaller">
				<li>Betriebsart auswählen (<cite>DMO</cite>/<cite>TMO</cite>)</li>
				<li>Kurzwahl eingeben, danach <cite>*</cite> drücken</li>
				<li><cite>Anlage</cite> auswählen</li>
			</ul>
		</div>
		<div style="flex-grow: 1">
			<label for="sepura"><input type="radio" id="sepura" name="funke" value="sepura">Sepura</label>
			<ul>
				<li>Modustaste drücken</li>
				<li>Nummer eingeben</li>
				<li>bestätigen</li>
			</ul>
		</div>
	</div>
	<hr/>
	<footer>
		<h6>Impressum</h6>
		<p>M. Schmidt</p>
		<p>Leitstelle Ennepe-Ruhr</p>
		<p><a href="mailto:m.schmidt@leitstelle-en.de?subject=Wg%3A%20Suchfunktion%20Rufgruppen%20NRW%20V22%20-%20v2.30">m.schmidt@leitstelle-en.de</a></p>
		<p class="version">v2.30</p>
	</footer>
	<button class="add-button">Zum Startbildschirm hinzufügen</button><br/>
</body>
<script>
$(".share-button").button()
$(".add-button").button()
const zusatzMapping= {
		"text_adhoc_bund" : "Für Ad-hoc-Einsatzlagen; Abstimmung mit TTB, Freischaltung für alle BOS möglich",
		"text_adhoc_land": "Für Ad-hoc-Einsatzlagen; Abstimmung mit TTB",
		"text_plan_bund" : "Für planbare Einsatzlagen; Abstimmung mit TTB, Freischaltung für alle BOS möglich",
		"text_plan_land": "Für planbare Einsatzlagen; Abstimmung mit TTB"
}
let lastWert;
$(() => {
	const gruppenInput = $('#gruppen')
	gruppenInput.autocomplete({
		source: gruppen,
		minLength:0,
		autoFocus: true,
		select: (e, ui) => {
		console.log({ui, e, item: ui.item})
			$('#wert').val(ui.item.value)
			const zusatzText = zusatzMapping[ui.item.Zusatztext];
			$('#zusatztext').val(zusatzText).toggle(!!zusatzText)
			$('#pol_kw').val(ui.item['POL Kurzwahl']).toggle(!!ui.item['POL Kurzwahl'])
			$('#pol_kw_label').toggle(!!ui.item['POL Kurzwahl'])
			gruppenInput.val(ui.item.label)
			lastWert = ui.item
			{
				$('#RTH').toggleClass('hidden', !ui.item.RTH);
				$('#nPol').toggleClass('hidden', !ui.item.nPol);
				$('#THW').toggleClass('hidden', !ui.item.THW);
				$('#Pol').toggleClass('hidden', !ui.item.Pol);
				$(".nutzer").toggle(!!ui.item.RTH || !!ui.item.nPol || !!ui.item.THW || !!ui.item.Pol)
			}
			{	
				$('#Kreisweit').toggleClass('hidden', !ui.item.Kreisweit);
				$('#Landesweit').toggleClass('hidden', !ui.item.Landesweit);
				$('#Bundesweit').toggleClass('hidden', !ui.item.Bundesweit);
				$(".gebiet").toggle(!!ui.item.Kreisweit || !!ui.item.Landesweit || !!ui.item.Bundesweit)
			}
			$(".share-button").show()
			console.log(ui.item);
			return false;
		}
	});
	$('#gruppen_version_span').text(gruppen_version);
});
</script>
</html>
